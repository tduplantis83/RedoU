<!-- ADD TIPS FOR CALORIE INTAKE -->
<!-- ADD TIPS FOR CALORIE DEFICIT -->
<!-- ADD TIPS FOR BODY MEASURING -->
<!-- ADD DAILY AVATAR TO CALORIC PERFORMANCE TABLE -->
<!-- ADD ABILITY TO SHARE A DAY'S CALORIC PERFORMANCE WITH COMMUNITY (AS A FORUM POST?) -->
<!-- ADD CHART(S) -->

<!-- USER DIRECT MESSAGING FEATURE? -->

<div class="container-fluid" *ngIf="user && user.role !== 'admin'">
  <!-- BASIC USER INFO START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">User Info</h3>
    <h3 class="text-center">
      <button class="btn btn-warning" (click)="userUpdate = true">
        Edit User Info
      </button>
    </h3>
    <div class="form-check form-check-inline" style="float: right">
      <input
        class="form-check-input"
        type="radio"
        name="system1"
        id="system1"
        value="metric"
        [(ngModel)]="measurementSystem"
      />
      <label class="form-check-label" for="system1">Metric</label>
    </div>
    <div class="form-check form-check-inline" style="float: right">
      <input
        class="form-check-input"
        type="radio"
        name="system1"
        id="system1"
        value="US"
        [(ngModel)]="measurementSystem"
      />
      <label class="form-check-label" for="system1">US</label>
    </div>
    <table
      class="table table-bordered table-hover table-striped text-center align-middle"
    >
      <thead class="thead-dark align-bottom text-center">
        <tr>
          <th>Username</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Birthday</th>
          <th>Age</th>
          <th>Sex</th>
          <th>Current Goal</th>
          <th *ngIf="measurementSystem === 'US'">Current Weight (lbs)</th>
          <th *ngIf="measurementSystem === 'metric'">Current Weight (kg)</th>
          <th *ngIf="measurementSystem === 'US'">Goal Weight (lbs)</th>
          <th *ngIf="measurementSystem === 'metric'">Goal Weight (kg)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ user.username }}</td>
          <td>{{ user.firstName }}</td>
          <td>{{ user.lastName }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.birthday | date: "shortDate" }}</td>
          <td>{{ age }}</td>
          <td>{{ user.sex }}</td>
          <td>
            {{ userCurrentGoal.goalName }}<br /><button
              class="btn btn-warning btn-sm"
              (click)="updateUCG = true"
            >
              Edit
            </button>
          </td>
          <td *ngIf="measurementSystem === 'US'">
            {{
              userMostCurrentWeight
                | measurementConverter: "kg":"lb"
                | number: "1.0-2"
            }}
          </td>
          <td *ngIf="measurementSystem === 'metric'">
            {{ userMostCurrentWeight }}
          </td>
          <td *ngIf="measurementSystem === 'US'">
            {{
              userMostCurrentGoalWeight
                | measurementConverter: "kg":"lb"
                | number: "1.0-2"
            }}
          </td>
          <td *ngIf="measurementSystem === 'metric'">
            {{ userMostCurrentGoalWeight }}
          </td>
        </tr>
      </tbody>
    </table>
    <br />
  </div>
  <!-- BASIC USER INFO END -->

  <!-- BASIC USER UPDATE INFO START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      userUpdate && !calcWeightLoss
    "
  >
    <h3 class="text-center">Edit User Info</h3>
    <form name="updateUserInfoForm">
      <div class="form-row">
        <div class="col-3"></div>
        <div class="col-6">
          <h3 class="text-center">
            <button
              class="btn btn-danger"
              (click)="userPassUpdate = !userPassUpdate"
            >
              Update Username/Password
            </button>
          </h3>
        </div>
        <div class="col-3"></div>
      </div>
      <div class="form-row" *ngIf="userPassUpdate === true">
        <div class="col-3"></div>
        <div class="col-6">
          <h6 class="text-center">
            <small style="color: red;"
              >* Username or Password changes require you to login again
              *</small
            >
          </h6>
        </div>
        <div class="col-3"></div>
      </div>
      <div class="form-row" *ngIf="userPassUpdate === true">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="username">Username</label>
          <input
            type="text"
            class="form-control"
            id="username"
            name="username"
            [(ngModel)]="newUser.username"
          />
        </div>
        <div class="col-4">
          <label for="password">Password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            [(ngModel)]="newUser.password"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row" *ngIf="userPassUpdate === false">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="username">Username</label>
          <input
            disabled
            type="text"
            class="form-control"
            id="username"
            name="username"
            [(ngModel)]="newUser.username"
          />
        </div>
        <div class="col-4">
          <label for="password">Password</label>
          <input
            disabled
            type="password"
            class="form-control"
            id="password"
            name="password"
            [(ngModel)]="newUser.password"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="fname">First Name</label>
          <input
            type="text"
            class="form-control"
            id="fname"
            name="fname"
            [(ngModel)]="newUser.firstName"
          />
        </div>
        <div class="col-4">
          <label for="lname">Last Name</label>
          <input
            type="text"
            class="form-control"
            id="lname"
            name="lname"
            [(ngModel)]="newUser.lastName"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="bday">Birthday</label>
          <input
            type="date"
            class="form-control"
            id="bday"
            name="bday"
            [(ngModel)]="newUser.birthday"
          />
        </div>
        <div class="col-4">
          <label for="email">Email</label>
          <input
            type="text"
            class="form-control"
            id="email"
            name="email"
            [(ngModel)]="newUser.email"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="userUpdate = false"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-warning"
            style="float:right;"
            (click)="updateUserInfo()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- BASIC USER UPDATE INFO END -->

  <!-- UPDATE CURRENT GOAL START -->
  <div class="container" *ngIf="updateUCG === true">
    <h5 class="text-center">Edit Current Fitness Goal:</h5>
    <br />
    <form name="currGoalForm" id="currGoalForm">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <select
            class="custom-select"
            name="goal"
            id="goal"
            [(ngModel)]="userCurrGoal.goal"
          >
            <option [ngValue]="userCurrentGoal.goal" disabled selected>{{
              userCurrentGoal.goalName
            }}</option>
            <option
              [ngValue]="g"
              name="goal"
              *ngFor="let g of allGoals | arraySort: 'goalName':false"
              >{{ g.goalName }}</option
            >
          </select>
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="updateUCG = false; userCurrGoal = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-warning"
            style="float:right;"
            (click)="updateUserGoal()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- UPDATE CURRENT GOAL END -->

  <!-- USER'S AVATAR START -->
  <div
    class="container"
    *ngIf="
      bmiAvatar &&
      currentAvatar &&
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <div class="row">
      <div class="col-2"></div>
      <div class="col-4">
        <h5 class="text-center">BMI Avatar</h5>
        <h5 class="text-center">{{ bmiAvatar.bodyType }}</h5>
        <img
          [src]="bmiAvatar.avatarUrl"
          class="img-fluid"
          alt="BMI-based Avatar"
        />
      </div>
      <div class="col-4">
        <h5 class="text-center">Behavior-Based Avatar</h5>
        <h5 class="text-center">{{ currentAvatar.bodyType }}</h5>
        <img
          [src]="currentAvatar.avatarUrl"
          class="img-fluid"
          alt="Caloric-based Avatar"
        />
      </div>
      <div class="col-2"></div>
    </div>
  </div>
  <br />
  <!-- USER'S AVATAR END -->

  <!-- USER'S CALORIC PERFORMANCE START -->
  <div
    class="container"
    *ngIf="
      user.userDailyExerciseCaloricDeficits.length > 0 &&
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Caloric Performance</h3>
    <h3 class="text-center"><button class="btn btn-success" (click)="calcWeightLoss = true">Calculate Weight Loss Between Dates</button></h3>
    <table
      class="table table-bordered table-hover table-striped text-center align-middle"
    >
      <thead class="thead-dark align-bottom text-center">
        <tr>
          <th>Date</th>
          <th>Calories Eaten</th>
          <th>Calories Burned</th>
          <th>+Gain / -Loss</th>
          <th>Day Type</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let calBurn of user.userDailyExerciseCaloricDeficits
              | arraySort: 'dateCreated':true
          "
        >
          <td>{{ calBurn.dateCreated | date: "shortDate" }}</td>

          <td *ngIf="caloricIntakeByDateMap.get(calBurn.dateCreated) != null">
            {{ caloricIntakeByDateMap.get(calBurn.dateCreated) }}
          </td>
          <td *ngIf="caloricIntakeByDateMap.get(calBurn.dateCreated) == null">
            No Data
          </td>

          <td *ngIf="caloricDeficitByDateMap.get(calBurn.dateCreated) != null">
            {{ caloricDeficitByDateMap.get(calBurn.dateCreated) }}
          </td>
          <td *ngIf="caloricDeficitByDateMap.get(calBurn.dateCreated) == null">
            No Data
          </td>

          <td
            *ngIf="
              caloricIntakeByDateMap.get(calBurn.dateCreated) != null &&
              caloricDeficitByDateMap.get(calBurn.dateCreated) != null
            "
          >
            {{
              caloricIntakeByDateMap.get(calBurn.dateCreated) -
                caloricDeficitByDateMap.get(calBurn.dateCreated)
            }}
          </td>
          <td *ngIf="caloricIntakeByDateMap.get(calBurn.dateCreated) == null">
            Unknown
          </td>
          <td *ngIf="caloricDeficitByDateMap.get(calBurn.dateCreated) == null">
            Unknown
          </td>

          <td
            *ngIf="
              caloricIntakeByDateMap.get(calBurn.dateCreated) == null ||
              caloricDeficitByDateMap.get(calBurn.dateCreated) == null
            "
          >
            Unknown
          </td>
          <td
            *ngIf="
              caloricIntakeByDateMap.get(calBurn.dateCreated) -
                caloricDeficitByDateMap.get(calBurn.dateCreated) ==
              0
            "
          >
            No Change
          </td>
          <td
            id="loss"
            *ngIf="
              caloricIntakeByDateMap.get(calBurn.dateCreated) -
                caloricDeficitByDateMap.get(calBurn.dateCreated) <
              0
            "
          >
            Weight Loss!
          </td>
          <td
            id="gain"
            *ngIf="
              caloricIntakeByDateMap.get(calBurn.dateCreated) -
                caloricDeficitByDateMap.get(calBurn.dateCreated) >
              0
            "
          >
            Weight Gain!
          </td>
        </tr>
      </tbody>
    </table>
    <br />
  </div>
  <!-- USER'S CALORIC PERFORMANCE END -->

  <!-- USER'S CALCULATE WEIGHT LOSS START -->
  <div class="container" *ngIf="calcWeightLoss === true">
    <h3 class="text-center">Weight Loss Estimator</h3>
    <form name="calculateWeightLossForm">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="startDate">Start Date</label>
          <input
              type="date"
              class="form-control"
              id="startDate"
              name="startDate"
              [(ngModel)]="calcWeightLossStart"
            />
        </div>
        <div class="col-4">
          <label for="endDate">End Date</label>
          <input
              type="date"
              class="form-control"
              id="endDate"
              name="endDate"
              [(ngModel)]="calcWeightLossEnd"
            />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
              type="submit"
              class="btn btn-secondary"
              style="float:left;"
              (click)="calcWeightLoss = false; weightLossUS !== null && weightLossMetric !== null"
              [routerLink]="['/users']"
            >
              Back
          </button>
        </div>
        <div class="col-4">
          <button
              type="submit"
              class="btn btn-success"
              style="float:right;"
              (click)="calculateWeightLoss()"
            >
              Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
    <br>
    <!-- USER'S CALCULATE RESULT START -->
    <div *ngIf="weightLossUS !== null && weightLossMetric !== null">
      <div class="row">
        <div class="col-2"></div>
        <div class="col-8">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="systemWL"
              id="systemWL"
              value="metric"
              [(ngModel)]="measurementSystem"
            />
            <label class="form-check-label" for="systemWL">Metric</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="systemWL"
              id="systemWL"
              value="US"
              [(ngModel)]="measurementSystem"
            />
            <label class="form-check-label" for="systemWL">US</label>
          </div>
        </div>
      <div class="col-2"></div>
      </div>
      <table class="table table-bordered table-hover table-striped text-center align-middle">
        <thead class="thead-dark align-bottom text-center">
          <tr>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Total Caloric Gain/Loss</th>
            <th *ngIf="measurementSystem === 'US'">+Gained / -Lost (Lbs)</th>
            <th *ngIf="measurementSystem === 'metric'">+Gained/ -Lost (Kgs)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ calcWeightLossStart | date: 'shortDate' }}</td>
            <td>{{ calcWeightLossEnd | date: 'shortDate' }}</td>
            <td>{{ calTotal }}</td>
            <td *ngIf="measurementSystem === 'US'">{{ weightLossUS | number: "1.0-2"}}</td>
            <td *ngIf="measurementSystem === 'metric'">{{ weightLossMetric | number: "1.0-2"}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- USER'S CALCULATE RESULT END -->
  </div>
  <!-- USER'S CALCULATE WEIGHT LOSS END -->

  <!-- USER'S CALORIC INTAKE START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Caloric Intake</h3>
    <h3 class="text-center">
      <button class="btn btn-success" (click)="addACaloricRecord()">
        New Caloric Intake Record
      </button>
    </h3>
    <table
      class="table table-bordered table-hover table-striped text-center align-middle"
      *ngIf="user.userDailyCaloricIntakes.length > 0"
    >
      <thead class="thead-dark align-bottom text-center">
        <tr>
          <th>Date</th>
          <th>Meal</th>
          <th>Meal Description</th>
          <th>Calories</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let caloricIntake of user.userDailyCaloricIntakes
              | arraySort: 'dateCreated':true
          "
        >
          <td>{{ caloricIntake.dateCreated | date: "shortDate" }}</td>
          <td>{{ caloricIntake.mealType.mealTypeName }}</td>
          <td>{{ caloricIntake.mealDescription }}</td>
          <td>{{ caloricIntake.caloriesThisMeal }}</td>
          <td>
            <button
              class="btn btn-warning"
              (click)="setUpdateCalorieRecord(caloricIntake)"
            >
              Edit
            </button>
          </td>
          <td>
            <button
              class="btn btn-danger"
              (click)="deleteCalories(caloricIntake)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <br />
  </div>
  <!-- USER'S CALORIC INTAKE END -->

  <!-- USER ADD CALORIC INTAKE START -->
  <div class="container" *ngIf="caloricIntake && newCalorieRecord === true">
    <h3 class="text-center">New Caloric Intake</h3>
    <form name="addCaloricIntakeForm">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="date">Date Eaten</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="caloricIntake.dateCreated"
          />
        </div>
        <div class="col-4">
          <label for="mealType">Meal Type</label>
          <select
            class="custom-select"
            name="mealType"
            id="mealType"
            [(ngModel)]="caloricIntake.mealType"
          >
            <option selected>Choose a Meal Type</option>
            <option
              [ngValue]="mt"
              name="mealType"
              *ngFor="let mt of mealTypes | arraySort: 'mealTypeName':false"
              >{{ mt.mealTypeName }}</option
            >
          </select>
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="calories">Total Calories This Meal</label>
          <input
            type="number"
            class="form-control"
            id="calories"
            name="calories"
            [(ngModel)]="caloricIntake.caloriesThisMeal"
          />
        </div>
        <div class="col-4">
          <label for="description">Meal Description</label>
          <input
            type="text"
            class="form-control"
            id="description"
            name="description"
            [(ngModel)]="caloricIntake.mealDescription"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newCalorieRecord = false; caloricIntake = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-success"
            style="float:right;"
            (click)="addCalories()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER ADD CALORIC INTAKE END -->

  <!-- USER UPDATE CALORIC INTAKE START -->
  <div class="container" *ngIf="caloricIntake && newCalorieRecord === false">
    <h3 class="text-center">Edit Caloric Intake</h3>
    <form name="updateCaloricIntakeForm">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="date">Date Eaten</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="caloricIntake.dateCreated"
          />
        </div>
        <div class="col-4">
          <label for="mealType">Meal Type</label>
          <select
            class="custom-select"
            name="mealType"
            id="mealType"
            [(ngModel)]="caloricIntake.mealType"
          >
            <option selected>{{ caloricIntake.mealType.mealTypeName }}</option>
            <option
              [ngValue]="mt"
              name="mealType"
              *ngFor="let mt of mealTypes | arraySort: 'mealTypeName':false"
              >{{ mt.mealTypeName }}</option
            >
          </select>
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="calories">Total Calories This Meal</label>
          <input
            type="number"
            class="form-control"
            id="calories"
            name="calories"
            [(ngModel)]="caloricIntake.caloriesThisMeal"
          />
        </div>
        <div class="col-4">
          <label for="description">Meal Description</label>
          <input
            type="text"
            class="form-control"
            id="description"
            name="description"
            [(ngModel)]="caloricIntake.mealDescription"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newCalorieRecord = false; caloricIntake = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-warning"
            style="float:right;"
            (click)="updateCalories()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER UPDATE CALORIC INTAKE END -->

  <!-- USER'S CALORIES BURNED START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Calories Burned:</h3>
    <h5 class="text-center">Calculated BMR: {{ BMR }} Calories</h5>
    <h3 class="text-center">
      <button class="btn btn-success" (click)="addACaloricBurnRecord()">
        New Caloric Deficit Record
      </button>
    </h3>
    <table
      class="table table-bordered table-hover table-striped text-center align-middle"
      *ngIf="user.userDailyExerciseCaloricDeficits.length > 0"
    >
      <thead class="thead-dark align-bottom text-center">
        <tr>
          <th>Date</th>
          <th>Activity Description</th>
          <th>Total Calories Burned</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let caloricDeficit of user.userDailyExerciseCaloricDeficits
              | arraySort: 'dateCreated':true
          "
        >
          <td>{{ caloricDeficit.dateCreated | date: "shortDate" }}</td>
          <td>{{ caloricDeficit.activityDescription }}</td>
          <td>{{ caloricDeficit.totalCaloriesBurned }}</td>
          <td>
            <button
              class="btn btn-warning"
              (click)="setUpdateCalorieBurnRecord(caloricDeficit)"
            >
              Edit
            </button>
          </td>
          <td>
            <button
              class="btn btn-danger"
              (click)="deleteCalorieBurn(caloricDeficit)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <br />
  </div>
  <!-- USER'S CALORIES BURNED END -->

  <!-- USER ADD CALORIES BURNED START -->
  <div
    class="container"
    *ngIf="caloricDeficit && newCalorieBurnRecord === true"
  >
    <h3 class="text-center">New Calories Burned</h3>
    <h5 class="text-center">Calculated BMR: {{ BMR }} Calories</h5>
    <form name="addCaloricDeficitForm">
      <div class="form-row">
        <div class="col-1"></div>
        <div class="col-5">
          <label for="date">Date</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="caloricDeficit.dateCreated"
          />
        </div>
        <div class="col-5">
          <label for="calories">Total Calories Burned Today (BMR by default)</label>
          <input
            type="number"
            class="form-control"
            id="calories"
            name="calories"
            [(ngModel)]="caloricDeficit.totalCaloriesBurned"
          />
        </div>
        <div class="col-1"></div>
      </div>
      <div class="form-row">
        <div class="col-1"></div>
        <div class="col-10">
          <label for="description">Activity Description</label>
          <input
            type="text"
            class="form-control"
            id="description"
            name="description"
            [(ngModel)]="caloricDeficit.activityDescription"
          />
        </div>
        <div class="col-1"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-1"></div>
        <div class="col-5">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newCalorieBurnRecord = false; caloricDeficit = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-5">
          <button
            type="submit"
            class="btn btn-success"
            style="float:right;"
            (click)="addCalorieBurn()"
          >
            Submit
          </button>
        </div>
        <div class="col-1"></div>
      </div>
    </form>
  </div>
  <!-- USER ADD CALORIES BURNED END -->

  <!-- USER UPDATE CALORIES BURNED START -->
  <div
    class="container"
    *ngIf="caloricDeficit && newCalorieBurnRecord === false"
  >
    <h3 class="text-center">Edit Calories Burned</h3>
    <form name="addCaloricDeficitForm">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="date">Date</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="caloricDeficit.dateCreated"
          />
        </div>
        <div class="col-4">
          <label for="calories">Total Calories Burned Today</label>
          <input
            type="number"
            class="form-control"
            id="calories"
            name="calories"
            [(ngModel)]="caloricDeficit.totalCaloriesBurned"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <label for="description">Activity Description</label>
          <input
            type="text"
            class="form-control"
            id="description"
            name="description"
            [(ngModel)]="caloricDeficit.activityDescription"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newCalorieBurnRecord = false; caloricDeficit = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-warning"
            style="float:right;"
            (click)="updateCalorieBurn()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER UPDATE CALORIES BURNED END -->

  <!-- USER'S PROGRESS IMAGES START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Progress Images</h3>
    <h3 class="text-center">
      <button class="btn btn-success" (click)="addAProgressImage()">
        New Progress Images
      </button>
    </h3>
    <div *ngIf="userImagesByDate">
      <div *ngFor="let d of userImagesByDate | arraySort: 'date':true">
        <div *ngIf="d.image.length === 2" class="row">
          <div class="col-2"></div>
          <div class="col-4" *ngFor="let img of d.image">
            <h6 class="text-center">
              <strong>{{ d.date | date: "shortDate" }}</strong>
            </h6>
            <img
              id="progressImg"
              [src]="img.imageUrl"
              alt="Progress Image: {{ d.date | date: 'shortDate' }}"
              class="img img-fluid"
            />
            <button
              class="btn btn-sm btn-warning"
              style="float: left"
              (click)="setUpdateAProgressImage(img)"
            >
              Edit
            </button>
            <button
              class="btn btn-sm btn-danger"
              style="float: right"
              (click)="deleteAProgressImage(img)"
            >
              Delete
            </button>
          </div>
          <div class="col-2"></div>
        </div>

        <div *ngIf="d.image.length < 2" class="row">
          <div class="col-2"></div>
          <div class="col-8" *ngFor="let img of d.image">
            <h6 class="text-center">
              <strong>{{ d.date | date: "shortDate" }}</strong>
            </h6>
            <img
              id="progressImg"
              [src]="img.imageUrl"
              alt="Progress Image: {{ d.date | date: 'shortDate' }}"
              class="img img-fluid"
            />
            <button
              class="btn btn-sm btn-warning"
              style="float: left"
              (click)="setUpdateAProgressImage(img)"
            >
              Edit
            </button>
            <button
              class="btn btn-sm btn-danger"
              style="float: right"
              (click)="deleteAProgressImage(img)"
            >
              Delete
            </button>
          </div>
          <div class="col-2"></div>
        </div>
      </div>
      <br />
    </div>
    <br />
  </div>
  <!-- USER'S PROGRESS IMAGES END -->

  <!-- USER ADD PROGRESS IMAGES START -->
  <div
    class="container"
    *ngIf="
      progressImageFront && progressImageSide && newprogressImages === true
    "
  >
    <h3 class="text-center">New Progress Image(s)</h3>
    <form name="addProgressImagesForm">
      <div class="form-row">
        <div class="col-4"></div>
        <div class="col-4">
          <label for="date">Date</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="progressImageFront.dateCreated"
            [(ngModel)]="progressImageSide.dateCreated"
          />
        </div>
        <div class="col-4"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="imageUrlFront">Front-Facing Image URL</label>
          <input
            type="text"
            class="form-control"
            id="imageUrlFront"
            name="imageUrlFront"
            [(ngModel)]="progressImageFront.imageUrl"
          />
        </div>
        <div class="col-4">
          <label for="imageUrlSide">Side-Facing Image URL</label>
          <input
            type="text"
            class="form-control"
            id="imageUrlSide"
            name="imageUrlSide"
            [(ngModel)]="progressImageSide.imageUrl"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="
              newprogressImages = false;
              progressImageFront = null;
              progressImageSide = null
            "
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-success"
            style="float:right;"
            (click)="createNewProgressImages()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER ADD PROGRESS IMAGES END -->

  <!-- USER UPDATE PROGRESS IMAGES START -->
  <div class="container" *ngIf="progressImage && newprogressImages === false">
    <h3 class="text-center">Edit Progress Image</h3>
    <form name="addProgressImagesForm">
      <div class="form-row">
        <div class="col-4"></div>
        <div class="col-4">
          <label for="date">Date</label>
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="progressImage.dateCreated"
          />
        </div>
        <div class="col-4"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <label for="imageUrl">Image URL</label>
          <input
            type="text"
            class="form-control"
            id="imageUrl"
            name="imageUrl"
            [(ngModel)]="progressImage.imageUrl"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="progressImage = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-warning"
            style="float:right;"
            (click)="updateAProgressImage()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER UPDATE PROGRESS IMAGES END -->

  <!-- USER'S BODY MEASUREMENTS START -->
  <div
    class="container"
    *ngIf="
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !progressImage &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Body Measurements</h3>
    <h3 class="text-center">
      <button class="btn btn-success" (click)="addNewBodyMeasurementRecord()">
        New Body Measurement
      </button>
    </h3>
    <div *ngIf="user.userBodyMeasurementMetrics.length > 0">
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="system"
          id="system"
          value="US"
          [(ngModel)]="measurementSystem"
        />
        <label class="form-check-label" for="system">US</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="system"
          id="system"
          value="metric"
          [(ngModel)]="measurementSystem"
        />
        <label class="form-check-label" for="system">Metric</label>
      </div>
      <!-- METRIC SELECTED -->
      <table
        class="table table-bordered table-hover table-striped text-center align-middle"
        *ngIf="measurementSystem === 'metric'"
      >
        <thead class="thead-dark align-bottom text-center">
          <tr>
            <th>Date Measured</th>
            <th>Weight (kg)</th>
            <th>Goal Weight (kg)</th>
            <th>Waist (mm)</th>
            <th>Height (mm)</th>
            <th>Neck (mm)</th>
            <th>Shoulders (mm)</th>
            <th>Chest (mm)</th>
            <th>Bicep (mm)</th>
            <th>Hip (mm)</th>
            <th>Thigh (mm)</th>
            <th>BMI</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let m of user.userBodyMeasurementMetrics
                | arraySort: 'dateMeasured':true
            "
          >
            <td>{{ m.dateMeasured | date: "shortDate" }}</td>
            <td>{{ m.weightKg }}</td>
            <td>{{ m.goalWeightKg }}</td>
            <td>{{ m.waistMM }}</td>
            <td>{{ m.heightMM }}</td>
            <td *ngIf="m.neckMM">{{ m.neckMM }}</td>
            <td *ngIf="!m.neckMM">-</td>
            <td *ngIf="m.shouldersMM">{{ m.shouldersMM }}</td>
            <td *ngIf="!m.shouldersMM">-</td>
            <td *ngIf="m.chestMM">{{ m.chestMM }}</td>
            <td *ngIf="!m.chestMM">-</td>
            <td *ngIf="m.bicepMM">{{ m.bicepMM }}</td>
            <td *ngIf="!m.bicepMM">-</td>
            <td *ngIf="m.hipsMM">{{ m.hipsMM }}</td>
            <td *ngIf="!m.hipsMM">-</td>
            <td *ngIf="m.thighMM">{{ m.thighMM }}</td>
            <td *ngIf="!m.thighMM">-</td>
            <td>
              {{
                m.weightKg /
                  ((m.heightMM | measurementConverter: "mm":"m") *
                    (m.heightMM | measurementConverter: "mm":"m"))
                  | number: "1.0-2"
              }}
            </td>
            <td>
              <button
                class="btn btn-warning"
                (click)="setUpdateBodyMeasurmentRecord(m)"
              >
                Edit
              </button>
            </td>
            <td>
              <button
                class="btn btn-danger"
                (click)="deleteBodyMeasurmentRecord(m)"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- US SELECTED -->
      <table
        class="table table-bordered table-hover table-striped text-center align-middle"
        *ngIf="measurementSystem === 'US'"
      >
        <thead class="thead-dark align-bottom text-center">
          <tr>
            <th>Date Measured</th>
            <th>Weight (lbs)</th>
            <th>Goal Weight (lbs)</th>
            <th>Waist (in)</th>
            <th>Height (in)</th>
            <th>Neck (in)</th>
            <th>Shoulders (in)</th>
            <th>Chest (in)</th>
            <th>Bicep (in)</th>
            <th>Hip (in)</th>
            <th>Thigh (in)</th>
            <th>BMI</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let m of user.userBodyMeasurementMetrics
                | arraySort: 'dateMeasured':true
            "
          >
            <td>{{ m.dateMeasured | date: "shortDate" }}</td>
            <td>
              {{
                m.weightKg | measurementConverter: "kg":"lb" | number: "1.0-2"
              }}
            </td>
            <td>
              {{
                m.goalWeightKg
                  | measurementConverter: "kg":"lb"
                  | number: "1.0-2"
              }}
            </td>
            <td>
              {{
                m.waistMM | measurementConverter: "mm":"in" | number: "1.0-2"
              }}
            </td>
            <td>
              {{
                m.heightMM | measurementConverter: "mm":"in" | number: "1.0-2"
              }}
            </td>
            <td *ngIf="m.neckMM">
              {{ m.neckMM | measurementConverter: "mm":"in" | number: "1.0-2" }}
            </td>
            <td *ngIf="!m.neckMM">-</td>
            <td *ngIf="m.shouldersMM">
              {{
                m.shouldersMM
                  | measurementConverter: "mm":"in"
                  | number: "1.0-2"
              }}
            </td>
            <td *ngIf="!m.shouldersMM">-</td>
            <td *ngIf="m.chestMM">
              {{
                m.chestMM | measurementConverter: "mm":"in" | number: "1.0-2"
              }}
            </td>
            <td *ngIf="!m.chestMM">-</td>
            <td *ngIf="m.bicepMM">
              {{
                m.bicepMM | measurementConverter: "mm":"in" | number: "1.0-2"
              }}
            </td>
            <td *ngIf="!m.bicepMM">-</td>
            <td *ngIf="m.hipsMM">
              {{ m.hipsMM | measurementConverter: "mm":"in" | number: "1.0-2" }}
            </td>
            <td *ngIf="!m.hipsMM">-</td>
            <td *ngIf="m.thighMM">
              {{
                m.thighMM | measurementConverter: "mm":"in" | number: "1.0-2"
              }}
            </td>
            <td *ngIf="!m.thighMM">-</td>
            <td>
              {{
                (703 * m.weightKg | measurementConverter: "kg":"lb") /
                  ((m.heightMM | measurementConverter: "mm":"in") *
                    (m.heightMM | measurementConverter: "mm":"in"))
                  | number: "1.0-2"
              }}
            </td>
            <td>
              <button
                class="btn btn-warning"
                (click)="setUpdateBodyMeasurmentRecord(m)"
              >
                Edit
              </button>
            </td>
            <td>
              <button
                class="btn btn-danger"
                (click)="deleteBodyMeasurmentRecord(m)"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <br />
  </div>
  <!-- USER'S BODY MEASUREMENTS END -->

  <!-- USER ADD BODY MEASUREMENTS START -->
  <div class="container" *ngIf="bodyMeasurement && newBodyMeasurement === true">
    <h3 class="text-center">New Body Measurement</h3>
    <h5 class="text-center">
      <small style="color: red;">* Required Fields</small>
    </h5>
    <div class="row">
      <div class="col-2"></div>
      <div class="col-4">
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="system"
            id="system"
            value="US"
            [(ngModel)]="measurementSystem"
          />
          <label class="form-check-label" for="system">US</label>
        </div>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="system"
            id="system"
            value="metric"
            [(ngModel)]="measurementSystem"
          />
          <label class="form-check-label" for="system">Metric</label>
        </div>
      </div>
      <div class="col-6"></div>
    </div>
    <!-- METRIC SELECTED -->
    <form name="bodyMeasurementsForm" *ngIf="measurementSystem == 'metric'">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="dateMeasured">Date Measured</label>
          <input
            type="date"
            class="form-control"
            id="dateMeasured"
            name="dateMeasured"
            [(ngModel)]="bodyMeasurement.dateMeasured"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="heightMM">Height (mm)</label>
          <input
            type="number"
            class="form-control"
            id="heightMM"
            name="heightMM"
            [(ngModel)]="bodyMeasurement.heightMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="weightKg">Weight (kg)</label>
          <input
            type="number"
            class="form-control"
            id="weightKg"
            name="weightKg"
            [(ngModel)]="bodyMeasurement.weightKg"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="goalWeightKg">Goal Weight (kg)</label>
          <input
            type="number"
            class="form-control"
            id="goalWeightKg"
            name="goalWeightKg"
            [(ngModel)]="bodyMeasurement.goalWeightKg"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <small style="color: red;">*</small
          ><label for="waistMM">Waist (mm)</label>
          <input
            type="number"
            class="form-control"
            id="waistMM"
            name="waistMM"
            [(ngModel)]="bodyMeasurement.waistMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <hr />
      <h5 class="text-center">Optional</h5>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="neckMM">Neck (mm)</label>
          <input
            type="number"
            class="form-control"
            id="neckMM"
            name="neckMM"
            [(ngModel)]="bodyMeasurement.neckMM"
          />
        </div>
        <div class="col-4">
          <label for="shouldersMM">Shoulders (mm)</label>
          <input
            type="number"
            class="form-control"
            id="shouldersMM"
            name="shouldersMM"
            [(ngModel)]="bodyMeasurement.shouldersMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="chestMM">Chest (mm)</label>
          <input
            type="number"
            class="form-control"
            id="chestMM"
            name="chestMM"
            [(ngModel)]="bodyMeasurement.chestMM"
          />
        </div>
        <div class="col-4">
          <label for="bicepMM">Bicep (mm)</label>
          <input
            type="number"
            class="form-control"
            id="bicepMM"
            name="bicepMM"
            [(ngModel)]="bodyMeasurement.bicepMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="hipsMM">Hips (mm)</label>
          <input
            type="number"
            class="form-control"
            id="hipsMM"
            name="hipsMM"
            [(ngModel)]="bodyMeasurement.hipsMM"
          />
        </div>
        <div class="col-4">
          <label for="thighMM">Thigh (mm)</label>
          <input
            type="number"
            class="form-control"
            id="thighMM"
            name="thighMM"
            [(ngModel)]="bodyMeasurement.thighMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newBodyMeasurement = false; bodyMeasurement = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-primary"
            style="float:right;"
            (click)="createBodyMeasurement()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>

    <!-- US SELECTED -->
    <form name="bodyMeasurementsForm" *ngIf="measurementSystem == 'US'">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="dateMeasured">Date Measured</label>
          <input
            type="date"
            class="form-control"
            id="dateMeasured"
            name="dateMeasured"
            [(ngModel)]="bodyMeasurement.dateMeasured"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="heightMM">Height (in)</label>
          <input
            type="number"
            class="form-control"
            id="heightMM"
            name="heightMM"
            [(ngModel)]="bodyMeasurement.heightMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="weightKg">Weight (lbs)</label>
          <input
            type="number"
            class="form-control"
            id="weightKg"
            name="weightKg"
            [(ngModel)]="bodyMeasurement.weightKg"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="goalWeightKg">Goal Weight (lb)</label>
          <input
            type="number"
            class="form-control"
            id="goalWeightKg"
            name="goalWeightKg"
            [(ngModel)]="bodyMeasurement.goalWeightKg"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <small style="color: red;">*</small
          ><label for="waistMM">Waist (in)</label>
          <input
            type="number"
            class="form-control"
            id="waistMM"
            name="waistMM"
            [(ngModel)]="bodyMeasurement.waistMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <hr />
      <h5 class="text-center">Optional</h5>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="neckMM">Neck (in)</label>
          <input
            type="number"
            class="form-control"
            id="neckMM"
            name="neckMM"
            [(ngModel)]="bodyMeasurement.neckMM"
          />
        </div>
        <div class="col-4">
          <label for="shouldersMM">Shoulders (in)</label>
          <input
            type="number"
            class="form-control"
            id="shouldersMM"
            name="shouldersMM"
            [(ngModel)]="bodyMeasurement.shouldersMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="chestMM">Chest (in)</label>
          <input
            type="number"
            class="form-control"
            id="chestMM"
            name="chestMM"
            [(ngModel)]="bodyMeasurement.chestMM"
          />
        </div>
        <div class="col-4">
          <label for="bicepMM">Bicep (in)</label>
          <input
            type="number"
            class="form-control"
            id="bicepMM"
            name="bicepMM"
            [(ngModel)]="bodyMeasurement.bicepMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="hipsMM">Hips (in)</label>
          <input
            type="number"
            class="form-control"
            id="hipsMM"
            name="hipsMM"
            [(ngModel)]="bodyMeasurement.hipsMM"
          />
        </div>
        <div class="col-4">
          <label for="thighMM">Thigh (in)</label>
          <input
            type="number"
            class="form-control"
            id="thighMM"
            name="thighMM"
            [(ngModel)]="bodyMeasurement.thighMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="newBodyMeasurement = false; bodyMeasurement = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-primary"
            style="float:right;"
            (click)="createBodyMeasurement()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER ADD BODY MEASUREMENTS END -->

  <!-- USER UPDATE BODY MEASUREMENTS START -->
  <div
    class="container"
    *ngIf="bodyMeasurement && newBodyMeasurement === false"
  >
    <h3 class="text-center">Edit Body Measurement</h3>
    <h5 class="text-center">
      <small style="color: red;">* Required Fields</small>
    </h5>
    <div class="row">
      <div class="col-2"></div>
      <div class="col-4">
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="system"
            id="system"
            value="US"
            (click)="convertBodyMeasurementsToUS()"
            [(ngModel)]="measurementSystem"
          />
          <label class="form-check-label" for="system">US</label>
        </div>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            type="radio"
            name="system"
            id="system"
            value="metric"
            (click)="convertBodyMeasurementsToMetric()"
            [(ngModel)]="measurementSystem"
          />
          <label class="form-check-label" for="system">Metric</label>
        </div>
      </div>
      <div class="col-6"></div>
    </div>
    <!-- METRIC SELECTED -->
    <form name="bodyMeasurementsForm" *ngIf="measurementSystem === 'metric'">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="dateMeasured">Date Measured</label>
          <input
            type="date"
            class="form-control"
            id="dateMeasured"
            name="dateMeasured"
            [(ngModel)]="bodyMeasurement.dateMeasured"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="heightMM">Height (mm)</label>
          <input
            type="number"
            class="form-control"
            id="heightMM"
            name="heightMM"
            [(ngModel)]="bodyMeasurement.heightMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="weightKg">Weight (kg)</label>
          <input
            type="number"
            class="form-control"
            id="weightKg"
            name="weightKg"
            [(ngModel)]="bodyMeasurement.weightKg"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="goalWeightKg">Goal Weight (kg)</label>
          <input
            type="number"
            class="form-control"
            id="goalWeightKg"
            name="goalWeightKg"
            [(ngModel)]="bodyMeasurement.goalWeightKg"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <small style="color: red;">*</small
          ><label for="waistMM">Waist (mm)</label>
          <input
            type="number"
            class="form-control"
            id="waistMM"
            name="waistMM"
            [(ngModel)]="bodyMeasurement.waistMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <hr />
      <h5 class="text-center">Optional</h5>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="neckMM">Neck (mm)</label>
          <input
            type="number"
            class="form-control"
            id="neckMM"
            name="neckMM"
            [(ngModel)]="bodyMeasurement.neckMM"
          />
        </div>
        <div class="col-4">
          <label for="shouldersMM">Shoulders (mm)</label>
          <input
            type="number"
            class="form-control"
            id="shouldersMM"
            name="shouldersMM"
            [(ngModel)]="bodyMeasurement.shouldersMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="chestMM">Chest (mm)</label>
          <input
            type="number"
            class="form-control"
            id="chestMM"
            name="chestMM"
            [(ngModel)]="bodyMeasurement.chestMM"
          />
        </div>
        <div class="col-4">
          <label for="bicepMM">Bicep (mm)</label>
          <input
            type="number"
            class="form-control"
            id="bicepMM"
            name="bicepMM"
            [(ngModel)]="bodyMeasurement.bicepMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="hipsMM">Hips (mm)</label>
          <input
            type="number"
            class="form-control"
            id="hipsMM"
            name="hipsMM"
            [(ngModel)]="bodyMeasurement.hipsMM"
          />
        </div>
        <div class="col-4">
          <label for="thighMM">Thigh (mm)</label>
          <input
            type="number"
            class="form-control"
            id="thighMM"
            name="thighMM"
            [(ngModel)]="bodyMeasurement.thighMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="bodyMeasurement = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-primary"
            style="float:right;"
            (click)="updateBodyMeasurmentRecord()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>

    <!-- US SELECTED -->
    <form name="bodyMeasurementsForm" *ngIf="measurementSystem === 'US'">
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="dateMeasured">Date Measured</label>
          <input
            type="date"
            class="form-control"
            id="dateMeasured"
            name="dateMeasured"
            [(ngModel)]="bodyMeasurement.dateMeasured"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="heightMM">Height (in)</label>
          <input
            type="number"
            class="form-control"
            id="heightMM"
            name="heightMM"
            [(ngModel)]="bodyMeasurement.heightMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="weightKg">Weight (lbs)</label>
          <input
            type="number"
            class="form-control"
            id="weightKg"
            name="weightKg"
            [(ngModel)]="bodyMeasurement.weightKg"
          />
        </div>
        <div class="col-4">
          <small style="color: red;">*</small
          ><label for="goalWeightKg">Goal Weight (lb)</label>
          <input
            type="number"
            class="form-control"
            id="goalWeightKg"
            name="goalWeightKg"
            [(ngModel)]="bodyMeasurement.goalWeightKg"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-8">
          <small style="color: red;">*</small
          ><label for="waistMM">Waist (in)</label>
          <input
            type="number"
            class="form-control"
            id="waistMM"
            name="waistMM"
            [(ngModel)]="bodyMeasurement.waistMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <hr />
      <h5 class="text-center">Optional</h5>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="neckMM">Neck (in)</label>
          <input
            type="number"
            class="form-control"
            id="neckMM"
            name="neckMM"
            [(ngModel)]="bodyMeasurement.neckMM"
          />
        </div>
        <div class="col-4">
          <label for="shouldersMM">Shoulders (in)</label>
          <input
            type="number"
            class="form-control"
            id="shouldersMM"
            name="shouldersMM"
            [(ngModel)]="bodyMeasurement.shouldersMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="chestMM">Chest (in)</label>
          <input
            type="number"
            class="form-control"
            id="chestMM"
            name="chestMM"
            [(ngModel)]="bodyMeasurement.chestMM"
          />
        </div>
        <div class="col-4">
          <label for="bicepMM">Bicep (in)</label>
          <input
            type="number"
            class="form-control"
            id="bicepMM"
            name="bicepMM"
            [(ngModel)]="bodyMeasurement.bicepMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <label for="hipsMM">Hips (in)</label>
          <input
            type="number"
            class="form-control"
            id="hipsMM"
            name="hipsMM"
            [(ngModel)]="bodyMeasurement.hipsMM"
          />
        </div>
        <div class="col-4">
          <label for="thighMM">Thigh (in)</label>
          <input
            type="number"
            class="form-control"
            id="thighMM"
            name="thighMM"
            [(ngModel)]="bodyMeasurement.thighMM"
          />
        </div>
        <div class="col-2"></div>
      </div>
      <br />
      <div class="form-row">
        <div class="col-2"></div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-secondary"
            style="float:left;"
            (click)="bodyMeasurement = null"
            [routerLink]="['/users']"
          >
            Cancel
          </button>
        </div>
        <div class="col-4">
          <button
            type="submit"
            class="btn btn-primary"
            style="float:right;"
            (click)="updateBodyMeasurmentRecord()"
          >
            Submit
          </button>
        </div>
        <div class="col-2"></div>
      </div>
    </form>
  </div>
  <!-- USER UPDATE BODY MEASUREMENTS END -->

  <!-- USER'S POSTS WITH UNREAD REPLIES START -->
  <div
    class="container"
    *ngIf="
      postsWithNewReplies.length > 0 &&
      !caloricIntake &&
      !caloricDeficit &&
      !newprogressImages &&
      !newBodyMeasurement &&
      !bodyMeasurement &&
      !userUpdate &&
      !updateUCG && !calcWeightLoss
    "
  >
    <h3 class="text-center">Posts with New Replies</h3>
    <table
      class="table table-bordered table-hover table-striped text-center align-middle"
      *ngFor="let post of postsWithNewReplies | arraySort: 'dateCreated':true"
    >
      <thead class="thead-dark align-bottom text-center">
        <tr>
          <th>Posted By</th>
          <th>Topic</th>
          <th>Title</th>
          <th>Content</th>
          <th>Mark as Read</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ post.user.username }}</td>
          <td>{{ post.postTopic.topicName }}</td>
          <td>{{ post.title }}</td>
          <td>{{ post.content }}</td>
          <td>{{ post.dateCreated | date: "shortDate" }}</td>
        </tr>
        <tr
          *ngFor="
            let reply of post.originalPostReplies
              | arraySort: 'dateCreated':false
          "
        >
          <td *ngIf="reply.unread === true">
            <strong>Reply by:</strong> {{ reply.replyUser.username }}
          </td>
          <td *ngIf="reply.unread === true">
            <strong>Reply Date:</strong>
            {{ reply.dateCreated | date: "shortDate" }}
          </td>
          <td colspan="2" *ngIf="reply.unread === true">
            {{ reply.replyContent }}
          </td>
          <td *ngIf="reply.unread === true">
            <button class="btn btn-warning" (click)="markReplyAsRead(reply.id)">
              Mark Read
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- USER'S POSTS WITH UNREAD REPLIES END -->
</div>

<!-- ADMIN STUFF -->
<div class="container-fluid" *ngIf="user && user.role === 'admin'">
  <h1 class="text-center">Hello {{ user.firstName }} {{ user.lastName }}</h1>
  <div class="container" *ngIf="user.userAvatars.length > 0">
    <div class="row">
      <div class="col-5"></div>
      <div class="col-2">
        <img
          [src]="currentAvatar.avatarUrl"
          class="img-fluid"
          alt="Admin Avatar"
        />
      </div>
      <div class="col-5"></div>
    </div>
  </div>
  <br />
  <h3 class="text-center">User Administration</h3>
  <table
    class="table table-bordered table-hover table-striped text-center align-middle"
  >
    <thead class="thead-dark align-bottom text-center">
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Birthday</th>
        <th>Sex</th>
        <th>Email</th>
        <th>Role</th>
        <th>Date Created</th>
        <th>Date Updated</th>
        <th>Enable/Disable</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of allUsers | arraySort: 'id':false">
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.firstName }}</td>
        <td>{{ u.lastName }}</td>
        <td>{{ u.birthday }}</td>
        <td>{{ u.sex }}</td>
        <td>
          <a href="mailto:{{ u.email }}" target="_blank">{{ u.email }}</a>
        </td>
        <td>{{ u.role }}</td>
        <td>{{ u.dateCreated | date: "shortDate" }}</td>
        <td>{{ u.dateUpdated | date: "shortDate" }}</td>
        <td *ngIf="u.enabled === true">
          <button class="btn btn-warning" (click)="disableUser(u)">
            Disable
          </button>
        </td>
        <td *ngIf="u.enabled === false">
          <button class="btn btn-success" (click)="enableUser(u)">
            Enable
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
